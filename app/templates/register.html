{% extends "base.html" %}

{% block title %}–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è ‚Äî XK Media{% endblock %}

{% block head %}
<style>
    .auth-container {
        max-width: 480px;
        margin: 2rem auto;
    }

    .auth-card {
        padding: 2.5rem;
    }

    .auth-header {
        text-align: center;
        margin-bottom: 2rem;
    }

    .auth-header h1 {
        font-size: 1.75rem;
        margin-bottom: 0.5rem;
    }

    .auth-header p {
        color: var(--text-muted);
    }

    .auth-form {
        margin-bottom: 1.5rem;
    }

    .auth-footer {
        text-align: center;
        padding-top: 1.5rem;
        border-top: 1px solid var(--border);
        color: var(--text-muted);
    }

    .role-selector {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1rem;
        margin-bottom: 1.5rem;
    }

    .role-option {
        position: relative;
    }

    .role-option input {
        position: absolute;
        opacity: 0;
        cursor: pointer;
    }

    .role-card {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 1.5rem 1rem;
        background: var(--secondary);
        border: 2px solid var(--border);
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.2s;
    }

    .role-option input:checked + .role-card {
        border-color: var(--accent);
        background: rgba(233, 69, 96, 0.1);
    }

    .role-card:hover {
        border-color: var(--accent);
    }

    .role-icon {
        font-size: 2rem;
        margin-bottom: 0.5rem;
    }

    .role-title {
        font-weight: 600;
        margin-bottom: 0.25rem;
    }

    .role-desc {
        font-size: 0.75rem;
        color: var(--text-muted);
        text-align: center;
    }

    .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1rem;
    }

    @media (max-width: 480px) {
        .form-row {
            grid-template-columns: 1fr;
        }
    }

    .offer-checkbox {
        display: flex;
        align-items: flex-start;
        gap: 0.75rem;
        margin: 1.5rem 0;
        padding: 1rem;
        background: var(--bg-secondary);
        border-radius: 8px;
    }

    .offer-checkbox input[type="checkbox"] {
        width: 20px;
        height: 20px;
        margin-top: 2px;
        flex-shrink: 0;
    }

    .offer-checkbox label {
        font-size: 0.9rem;
        line-height: 1.5;
        cursor: pointer;
    }

    .offer-checkbox a {
        color: var(--accent);
    }

    .oauth-buttons {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
    }

    .oauth-buttons .btn {
        background: var(--card-bg);
        border: 1px solid var(--border);
        color: var(--text);
        transition: all 0.3s;
    }

    .oauth-buttons .btn:hover {
        background: var(--card-bg-hover);
        border-color: var(--border-hover);
        transform: translateY(-2px);
    }

    .oauth-buttons .btn svg {
        flex-shrink: 0;
    }
</style>
{% endblock %}

{% block content %}
<div class="auth-container">
    <div class="card auth-card">
        <div class="auth-header">
            <h1>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h1>
            <p>–°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç –≤ XK Media</p>
        </div>

        {% if error == "offer" %}
        <div class="alert alert-error">–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–∏–Ω—è—Ç—å —É—Å–ª–æ–≤–∏—è –æ—Ñ–µ—Ä—Ç—ã –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</div>
        {% elif error %}
        <div class="alert alert-error">{{ error }}</div>
        {% endif %}

        <form class="auth-form" method="POST" action="/register">
            <div class="form-group">
                <label class="form-label">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å</label>
                <div class="role-selector">
                    <label class="role-option">
                        <input type="radio" name="role" value="advertiser" {% if role == 'advertiser' %}checked{% endif %} required>
                        <div class="role-card">
                            <span class="role-icon">üì¢</span>
                            <span class="role-title">–†–µ–∫–ª–∞–º–æ–¥–∞—Ç–µ–ª—å</span>
                            <span class="role-desc">–†–∞–∑–º–µ—â–∞—é —Ä–µ–∫–ª–∞–º—É</span>
                        </div>
                    </label>
                    <label class="role-option">
                        <input type="radio" name="role" value="venue" {% if role == 'venue' %}checked{% endif %} required>
                        <div class="role-card">
                            <span class="role-icon">üì∫</span>
                            <span class="role-title">–ü–ª–æ—â–∞–¥–∫–∞</span>
                            <span class="role-desc">–í–ª–∞–¥–µ—é —ç–∫—Ä–∞–Ω–∞–º–∏</span>
                        </div>
                    </label>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label class="form-label" for="first_name">–ò–º—è</label>
                    <input type="text" id="first_name" name="first_name" class="form-input" placeholder="–ò–≤–∞–Ω" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="last_name">–§–∞–º–∏–ª–∏—è</label>
                    <input type="text" id="last_name" name="last_name" class="form-input" placeholder="–ò–≤–∞–Ω–æ–≤">
                </div>
            </div>

            <div class="form-group">
                <label class="form-label" for="email">Email</label>
                <input type="email" id="email" name="email" class="form-input" placeholder="your@email.com" required>
            </div>

            <div class="form-group">
                <label class="form-label" for="password">–ü–∞—Ä–æ–ª—å</label>
                <input type="password" id="password" name="password" class="form-input" placeholder="–ú–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤" minlength="8" required>
            </div>

            <div class="form-group">
                <label class="form-label" for="password_confirm">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å</label>
                <input type="password" id="password_confirm" name="password_confirm" class="form-input" placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å" required>
            </div>

            <div class="offer-checkbox">
                <input type="checkbox" id="accept_offer" name="accept_offer" value="1" required>
                <label for="accept_offer">
                    –Ø –ø—Ä–∏–Ω–∏–º–∞—é —É—Å–ª–æ–≤–∏—è <a href="/offer" target="_blank">–æ—Ñ–µ—Ä—Ç—ã</a> –∏ –¥–∞—é —Å–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
                </label>
            </div>

            <button type="submit" class="btn btn-primary" style="width: 100%;">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
        </form>

        <div class="divider"><span>–∏–ª–∏</span></div>

        <div class="oauth-buttons" style="margin-bottom: 1.5rem;">
            <a href="/auth/oauth/yandex?role={{ role }}" class="btn btn-secondary" style="width: 100%; display: flex; align-items: center; justify-content: center; gap: 0.5rem;">
                <svg width="20" height="20" viewBox="0 0 24 24"><path fill="#FC3F1D" d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.894 16.894H8.106v-1.789h9.788v1.789zm0-3.577H8.106v-1.789h9.788v1.789zm0-3.577H8.106V7.95h9.788v1.79z"/></svg>
                –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ Yandex
            </a>
        </div>

        <div class="auth-footer">
            <p>–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a href="/login">–í–æ–π—Ç–∏</a></p>
        </div>
    </div>
</div>
{% endblock %}


