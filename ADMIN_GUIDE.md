# Инструкция для админа: Добавление рекламодателей к ТВ

## Проблема решена ✅

Колонка `yk_payment_id` уже добавлена в базу данных. Сервер перезапущен.

## Как добавить рекламодателей к ТВ-экрану

### Шаг 1: Войдите как админ

1. Откройте: `http://localhost:8080/login`
2. Email: `admin@xk-media.ru`
3. Пароль: `admin123`

### Шаг 2: Перейдите к списку ТВ

1. В админ-панели найдите раздел "ТВ" или перейдите напрямую:
   ```
   http://localhost:8080/admin/tvs
   ```

### Шаг 3: Выберите ТВ-экран

1. Найдите нужный ТВ-экран в списке
2. Нажмите на него или перейдите по ссылке
3. URL будет выглядеть так: `/admin/tv/{tv_code}`

### Шаг 4: Добавьте рекламодателя

**Вариант А: Через страницу рекламодателей ТВ**

1. На странице ТВ найдите раздел "Рекламодатели" или перейдите:
   ```
   http://localhost:8080/admin/tv/{tv_code}/advertisers
   ```
   Где `{tv_code}` - это код ТВ (например, `tv-abc123`)

2. Заполните форму:
   - **Рекламодатель** - выберите из списка существующих рекламодателей
   - **Название** - название рекламы (например, "Скидка 20%")
   - **URL** - ссылка куда ведет реклама (например, `https://example.com/promo`)
   - **Описание** - описание рекламы (опционально)
   - **Изображение** - URL изображения для рекламы (опционально)

3. Нажмите "Добавить"

**Вариант Б: Через основную страницу ТВ**

1. На странице `/admin/tv/{tv_code}` найдите форму "Добавить ссылку"
2. Заполните те же поля
3. Нажмите "Добавить"

### Шаг 5: Проверьте внешнюю страницу

После добавления рекламодателя, внешняя страница будет доступна по:

```
http://localhost:8080/tv/{tv_code}
```

Или через API:
```
http://localhost:8080/api/public/screen/{tv_code}
```

## Если нет рекламодателей

Если в списке нет рекламодателей, сначала создайте их:

1. Перейдите: `http://localhost:8080/admin/advertisers/add`
2. Заполните форму:
   - Email
   - Пароль
   - Имя, Фамилия
   - Название компании
   - ИНН и другие данные (опционально)
3. Нажмите "Создать"

## Если нет ТВ-экранов

Если нет ТВ-экранов, создайте их:

1. Перейдите: `http://localhost:8080/admin/tvs`
2. Найдите форму добавления ТВ или перейдите: `/admin/tvs/add`
3. Заполните:
   - **Код** - уникальный код для QR (например, `tv-cafe-1`)
   - **Название** - название ТВ (например, "ТВ в кофейне")
   - **Название заведения** - где находится ТВ
   - **Город** и **Адрес**
   - **Категория** - тип заведения
   - Другие данные
4. Нажмите "Добавить"

## Быстрый тест

1. Создайте тестового рекламодателя (если нет)
2. Создайте тестовый ТВ с кодом `test-tv-1`
3. Добавьте рекламодателя к этому ТВ:
   - Название: "Тестовая реклама"
   - URL: `https://example.com`
4. Откройте внешнюю страницу: `http://localhost:8080/tv/test-tv-1`
5. Вы должны увидеть рекламодателя на странице!

## Структура URL

- **Админ-панель ТВ**: `/admin/tv/{tv_code}`
- **Рекламодатели ТВ**: `/admin/tv/{tv_code}/advertisers`
- **Добавить рекламодателя**: POST `/admin/tv/{tv_code}/advertisers/add`
- **Внешняя страница**: `/tv/{tv_code}` (публичная, без авторизации)
- **API для ТВ-плееров**: `/api/public/screen/{tv_code}` (JSON)

## Важно

- Рекламодатель должен быть **активным** (`is_active = True`)
- ТВ должен быть **активным** (`is_active = True`)
- Ссылка должна быть **активной** (`is_active = True`)
- Только активные ссылки показываются на внешней странице
